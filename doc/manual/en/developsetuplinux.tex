This describes the setup of a development environment suitable to compile \xc for most supported platforms. The manual focuses on debian-based flavors of linux, but should be easily adapted to other distributions. It is developed with Ubuntu 14.04 LTS, and was last changed in March 2016. At this time, we recommend you use a newer Linux version (such as Ubuntu 15.10) which includes gcc 4.9 or higher.

\section{Install base system}
The procedure uses the standard install, during/after which you should update all packages to the current level using

\begin{verbatim}
sudo apt-get update
sudo apt-get upgrade
\end{verbatim}

\section{Platform-independent components}

Components required for all platforms, plus git for downloading the source and uploading commits.

\begin{verbatim}
sudo apt-get install make \
  librsvg2-bin xsltproc \
  imagemagick gettext \
  git quilt automake
\end{verbatim}
(At this point,technically  \texttt{automake} is not required for all builds, but most of them.)

\section{Download source code}

Download the source code of \xc by executing /textt{git} in the following way in your project directory
\begin{verbatim}
git clone git://git.xcsoar.org/xcsoar/master/xcsoar.git

# download submodule
cd xcsoar
git submodule init
git submodule update
\end{verbatim}


\section{For Unix builds}

Make sure your distribution contains a gcc compiler version 4.9 or higher. If you use Ubuntu 14.04 LTS (which has gcc 4.8.x), you will need to upgrade the compiler package.

In addition, the following packages are needed:

\begin{verbatim}
sudo apt-get install make g++ \
  zlib1g-dev \
  libsdl1.2-dev libfreetype6-dev \
  libpng-dev libjpeg-dev \
  libtiff5-dev libgeotiff-dev\
  libcurl4-openssl-dev \
  liblua5.2-dev \
  libxml-parser-perl \
  librsvg2-bin xsltproc \
  imagemagick gettext \
  libegl1-mesa-dev\
  fonts-dejavu
\end{verbatim}

\section{For Android  builds}
\subsection{Install JDK}
First of all, we need Java to work with Android. We use OpenJDK, slated to replace the original Sun/Oracle JDK officially for Android. At this point, both JDKs work, but the Oracle one is more complicated to install.

OpenJDK is installed via the packages
\begin{verbatim}
sudo apt-get install openjdk-7-jdk
sudo apt-get install vorbis-tools  ant
\end{verbatim}

\subsection{Install Android SDK and NDK}

The SDK and NDK are installed in the user directory. The \texttt{Makefile} expects them in specific directories, therefore we make some symlinks.

\begin{verbatim}
cd ~/
mkdir opt
cd opt/

# Download and extract SDK
wget "http://dl.google.com/android/android-sdk_r23-linux.tgz"

tar xvfz android-sdk_r23-linux.tgz
mv android-sdk-linux/ android-sdk-linux_x86/

ln -s android-sdk-linux/ android-sdk-linux_x86
rm android-sdk_r23-linux.tgz

# Download NDK installer

wget "http://dl.google.com/android/\
repository/android-ndk-r11-linux-x86_64.zip"

unzip android-ndk-r11-linux-x86_64.zip
mv android-ndk-r11-linux-x86_64.tar.bz2 android-ndk-r11
rm android-ndk-r11-linux-x86_64.zip
\end{verbatim}

We need to add the paths by appending the following lines to \texttt{\textasciitilde/.profile} and \texttt{\textasciitilde/.bashrc} --- here relative paths work.

\begin{verbatim}
# Android SDK
export ANDROID_SDK_HOME="~/opt/android-sdk-linux_x86"
export PATH="$PATH:$ANDROID_SDK_HOME/tools"
export PATH="$PATH:$ANDROID_SDK_HOME/platform-tools"

# Android NDK
export ANDROID_NDK_HOME="~/opt/android-ndk-r11"
export PATH="$PATH:$ANDROID_NDK_HOME"
\end{verbatim}

Now, you should start the Android manager with the \texttt{android} command, and install the required packages. Use the GUI to select and install SDK 19, and the (preselected) newest tools. Be warned, these will need many GB of space on your harddisk! (approximately 15 GB at the time of this writing)

Finally, for the \texttt{adb} debugger interface to work, most distributions require manual fixing of the \texttt{udev} rules. This can be done in the following way:

\begin{maxipage}
\begin{verbatim}
#Create etc/udev/rules.d/99-android.rules file

echo "#Acer" > 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="0502", MODE="0666"" >> 99-android.rules
echo "#ASUS" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="0b05", MODE="0666"" >> 99-android.rules
echo "#Dell" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="413c", MODE="0666"" >> 99-android.rules
echo "#Foxconn" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="0489", MODE="0666"" >> 99-android.rules
echo "#Garmin-Asus" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="091E", MODE="0666"" >> 99-android.rules
echo "#Google" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="18d1", MODE="0666"" >> 99-android.rules
echo "#HTC" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="0bb4", MODE="0666"" >> 99-android.rules
echo "#Huawei" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="12d1", MODE="0666"" >> 99-android.rules
echo "#K-Touch" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="24e3", MODE="0666"" >> 99-android.rules
echo "#KT Tech" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="2116", MODE="0666"" >> 99-android.rules
echo "#Kyocera" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="0482", MODE="0666"" >> 99-android.rules
echo "#Lenevo" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="17EF", MODE="0666"" >> 99-android.rules
echo "#LG" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="1004", MODE="0666"" >> 99-android.rules
echo "#Motorola" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="22b8", MODE="0666"" >> 99-android.rules
echo "#NEC" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="0409", MODE="0666"" >> 99-android.rules
echo "#Nook" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="2080", MODE="0666"" >> 99-android.rules
echo "#Nvidia" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="0955", MODE="0666"" >> 99-android.rules
echo "#OTGV" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="2257", MODE="0666"" >> 99-android.rules
echo "#Pantech" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="10A9", MODE="0666"" >> 99-android.rules
echo "#Philips" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="0471", MODE="0666"" >> 99-android.rules
echo "#PMC-Sierra" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="04da", MODE="0666"" >> 99-android.rules
\end{verbatim}
\end{maxipage}
\begin{maxipage}
\begin{verbatim}
echo "#Qualcomm" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="05c6", MODE="0666"" >> 99-android.rules
echo "#SK Telesys" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="1f53", MODE="0666"" >> 99-android.rules
echo "#Samsung" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="04e8", MODE="0666"" >> 99-android.rules
echo "#Sharp" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="04dd", MODE="0666"" >> 99-android.rules
echo "#Sony Ericsson" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="0fce", MODE="0666"" >> 99-android.rules
echo "#Toshiba" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="0930", MODE="0666"" >> 99-android.rules
echo "#ZTE" >> 99-android.rules
echo "SUBSYSTEM=="usb", SYSFS{idVendor}=="19D2", MODE="0666"" >> 99-android.rules
sudo mv -f 99-android.rules /etc/udev/rules.d/
sudo chmod a+r /etc/udev/rules.d/99-android.rules
\end{verbatim}
\end{maxipage}

\section{Optional: Eclipse IDE}
The standard IDE for Android development (directly suppoerted by Google) is Eclipse. It is not limited to Android, and can be used for all targets, of course. It is not required for \xc, but its installation including the extensions for Android development is described here as an example. Eclipse is quite heavyweight, and many developers prefer other IDEs for \xc development.

First we install the base package

\begin{verbatim}
apt-get install eclipse
\end{verbatim}

Now install ADT Android plugin for Eclipse inside the eclipse thing, using the Google instructions:
First downloadt the ADT Plugin from the Google website.

To add the ADT plugin to Eclipse:
\begin{itemize}
\item    Start Eclipse, then select Help > Install New Software.
\item    Click Add, in the top-right corner.
\item    In the Add Repository dialog that appears, enter "ADT Plugin" for the Name and the following URL for the Location:\\
   \texttt{ https://dl-ssl.google.com/android/eclipse/}\\
   (Note: The Android Developer Tools update site requires an https connection. Make sure you do not omit the \texttt{https})
\item    Click OK.
\item    In the Available Software dialog, select the checkbox next to Developer Tools and click Next.
\item    In the next window, you'll see a list of the tools to be downloaded. Click Next.
\item    Accept license agreements, click Finish.
\item    If there is a warning that the authenticity or validity of the software can not be established, click OK.
\item    When the installation completes, restart Eclipse.
\end{itemize}

When Eclipse restarts, you configure the location of the Android SDK directory:

\begin{itemize}
\item In the "Welcome to Android Development" window that appears, select Use existing SDKs.
\item Browse and select the location of the Android SDK directory you recently downloaded and unpacked.
\item Click Next.
\end{itemize}

For easy \texttt{git} operation via the eclipse IDE, you can install the Eclipse GIT Team provider from the ''install new software'' menu.

